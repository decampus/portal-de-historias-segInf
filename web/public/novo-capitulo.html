<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Escrever Novo Cap√≠tulo</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="site-header">
    <div class="logo">üìö Portal de Hist√≥rias</div>
    <nav class="site-nav">
      <a href="index.html">In√≠cio</a>
      <a href="perfil.html">Perfil</a>
      <a href="login.html">Login</a>
      <a href="categorias.html">Categorias</a>
    </nav>
  </header>

  <main class="main-content">
    <section class="novo-capitulo-section">
      <h2> Novo Cap√≠tulo</h2>
      <form id="novoCapituloForm">
        <label for="capaCapitulo" class="capa-label"></label>
        <input type="file" id="capaCapitulo" accept="image/*">
        <img id="previewCapa" src="" alt="Pr√©-visualiza√ß√£o da capa" style="display:none; max-width: 100%; margin-bottom: 20px;"/>

        <input type="text" id="tituloCapitulo" placeholder="T√≠tulo do Cap√≠tulo" required>
        <textarea id="conteudoCapitulo" placeholder="Escreva o conte√∫do do cap√≠tulo aqui..." required></textarea>
        
        <label class="checkbox-container">
          <input type="checkbox" id="finalCapitulo">
          <span class="checkmark"></span> Este √© o cap√≠tulo final da hist√≥ria
        </label>
        
        <button type="submit" class="btn-salvar">Salvar Cap√≠tulo</button>
      </form>
    </section>
  </main>
  <script>
 document.getElementById('novoCapituloForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const titulo = document.getElementById('tituloCapitulo').value.trim();
  const conteudo = document.getElementById('conteudoCapitulo').value.trim();
  const ehFinal = document.getElementById('finalCapitulo').checked;

  if (!titulo || !conteudo) {
    alert("Por favor, preencha todos os campos obrigat√≥rios.");
    return;
  }

  // Simula envio e seguran√ßa de dados
  const capitulo = {
    titulo,
    conteudo,
    final: ehFinal,
    dataCriacao: new Date().toISOString(),
    autor: localStorage.getItem('usuarioLogado') || 'Desconhecido'
  };

  // Salva temporariamente no localStorage
  const capitulos = JSON.parse(localStorage.getItem('capitulos') || '[]');
  capitulos.push(capitulo);
  localStorage.setItem('capitulos', JSON.stringify(capitulos));

  alert('Cap√≠tulo salvo com sucesso!');
  window.location.href = '#'; // Redirecionar para p√°gina da hist√≥ria ou perfil
});

  </script>
  <footer class="site-footer">
    <p>¬© 2025 Portal de Hist√≥rias</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
